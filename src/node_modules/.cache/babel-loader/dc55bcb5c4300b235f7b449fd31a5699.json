{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _GROUP, _PropTypes$shape;\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n} // In firefox, setTimeout with duration 0 too short for browser notice the changes in dom\n\n\nvar initialTransitDuration = 20;\nvar PHASE = {\n  CLOSE: 'close',\n  CLOSING: 'closing',\n  CLOSED: 'closed',\n  OPEN: 'open',\n  OPENING: 'opening',\n  OPENED: 'opened'\n};\nvar GROUP = (_GROUP = {}, _defineProperty(_GROUP, PHASE.CLOSE, PHASE.CLOSE), _defineProperty(_GROUP, PHASE.CLOSED, PHASE.CLOSE), _defineProperty(_GROUP, PHASE.OPENING, PHASE.CLOSE), _defineProperty(_GROUP, PHASE.CLOSING, PHASE.OPEN), _defineProperty(_GROUP, PHASE.OPEN, PHASE.OPEN), _defineProperty(_GROUP, PHASE.OPENED, PHASE.OPEN), _GROUP);\n\nvar Expand = /*#__PURE__*/function (_Component) {\n  _inherits(Expand, _Component);\n\n  function Expand(props) {\n    var _this;\n\n    _classCallCheck(this, Expand);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Expand).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"getClientHeight\", function () {\n      return _this.refWrapper.scrollHeight;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getDefaultExpandStyle\", function () {\n      var status = _this.state.status;\n\n      switch (status) {\n        case PHASE.OPENING:\n        case PHASE.CLOSE:\n        case PHASE.CLOSED:\n          return {\n            height: 0,\n            opacity: 0,\n            overflow: 'hidden'\n          };\n\n        case PHASE.OPENED:\n        case PHASE.CLOSING:\n          return {\n            height: _this.getClientHeight(),\n            opacity: 1,\n            overflow: 'hidden'\n          };\n\n        default:\n          return {\n            height: 'auto',\n            opacity: 1,\n            overflow: 'unset'\n          };\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getExpandStyle\", function () {\n      return _objectSpread({}, _this.getDefaultExpandStyle(), {}, _this.props.styles[GROUP[_this.state.status]]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTransition\", function (attribute) {\n      return \"\".concat(attribute, \" \").concat(_this.props.duration, \"ms \").concat(_this.props.easing);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateStatus\", function (status) {\n      return _this.setState({\n        status: status\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"delay\", function (fn, time) {\n      _this.timeout = setTimeout(fn, time);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"clearDelay\", function () {\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"transit\", function (entering, entered, enter) {\n      var duration = _this.props.duration;\n\n      _this.updateStatus(entering);\n\n      _this.delay(function () {\n        _this.updateStatus(entered);\n\n        _this.delay(function () {\n          _this.updateStatus(enter);\n        }, duration);\n      }, initialTransitDuration);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggle\", function (open) {\n      _this.clearDelay();\n\n      if (open) {\n        _this.transit(PHASE.OPENING, PHASE.OPENED, PHASE.OPEN);\n      } else {\n        _this.transit(PHASE.CLOSING, PHASE.CLOSED, PHASE.CLOSE);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRef\", function (ref) {\n      _this.refWrapper = ref;\n    });\n\n    _this.state = {\n      status: _this.props.open ? PHASE.OPEN : PHASE.CLOSE\n    };\n    return _this;\n  }\n\n  _createClass(Expand, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps\n    /* prevState */\n    ) {\n      if (prevProps.open !== this.props.open) {\n        this.toggle(this.props.open);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearDelay();\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      var transition = this.props.transitions.map(this.getTransition).join(',');\n      return _objectSpread({}, this.getExpandStyle(), {\n        transition: transition\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          className = _this$props.className,\n          children = _this$props.children,\n          Tag = _this$props.tag;\n      var childProps = {\n        className: className,\n        style: this.getStyle(),\n        ref: this.setRef\n      };\n      return _react[\"default\"].createElement(Tag, childProps, children);\n    }\n  }]);\n\n  return Expand;\n}(_react.Component);\n\nExpand.propTypes = {\n  children: _propTypes[\"default\"].node.isRequired,\n  open: _propTypes[\"default\"].bool,\n  duration: _propTypes[\"default\"].number,\n  easing: _propTypes[\"default\"].string,\n  className: _propTypes[\"default\"].string,\n  tag: _propTypes[\"default\"].string,\n  transitions: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string),\n  styles: _propTypes[\"default\"].shape((_PropTypes$shape = {}, _defineProperty(_PropTypes$shape, PHASE.OPEN, _propTypes[\"default\"].object), _defineProperty(_PropTypes$shape, PHASE.CLOSE, _propTypes[\"default\"].object), _PropTypes$shape))\n};\nExpand.defaultProps = {\n  open: false,\n  duration: 400,\n  easing: 'ease-in-out',\n  className: '',\n  tag: 'div',\n  transitions: ['height', 'opacity'],\n  styles: {}\n};\nvar _default = Expand;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../src/Expand.jsx"],"names":["initialTransitDuration","PHASE","CLOSE","CLOSING","CLOSED","OPEN","OPENING","OPENED","GROUP","Expand","Component","status","prevProps","height","opacity","overflow","transition","setTimeout","clearTimeout","duration","className","children","Tag","childProps","style","ref","setRef","PropTypes","open","easing","tag","transitions","styles"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// In firefox, setTimeout with duration 0 too short for browser notice the changes in dom\nconst initialTransitDuration = 20;\n\nconst PHASE = {\n  CLOSE: 'close',\n  CLOSING: 'closing',\n  CLOSED: 'closed',\n  OPEN: 'open',\n  OPENING: 'opening',\n  OPENED: 'opened',\n};\n\nconst GROUP = {\n  [PHASE.CLOSE]: PHASE.CLOSE,\n  [PHASE.CLOSED]: PHASE.CLOSE,\n  [PHASE.OPENING]: PHASE.CLOSE,\n\n  [PHASE.CLOSING]: PHASE.OPEN,\n  [PHASE.OPEN]: PHASE.OPEN,\n  [PHASE.OPENED]: PHASE.OPEN,\n};\n\nclass Expand extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      status: this.props.open ? PHASE.OPEN : PHASE.CLOSE,\n    };\n  }\n\n  componentDidUpdate(prevProps /* prevState */) {\n    if (prevProps.open !== this.props.open) {\n      this.toggle(this.props.open);\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearDelay();\n  }\n\n  getClientHeight = () => this.refWrapper.scrollHeight;\n\n  getDefaultExpandStyle = () => {\n    const { status } = this.state;\n\n    switch (status) {\n      case PHASE.OPENING:\n      case PHASE.CLOSE:\n      case PHASE.CLOSED:\n        return { height: 0, opacity: 0, overflow: 'hidden' };\n      case PHASE.OPENED:\n      case PHASE.CLOSING:\n        return { height: this.getClientHeight(), opacity: 1, overflow: 'hidden' };\n      default:\n        return { height: 'auto', opacity: 1, overflow: 'unset' };\n    }\n  };\n\n  getExpandStyle = () => ({\n    ...this.getDefaultExpandStyle(),\n    ...this.props.styles[GROUP[this.state.status]],\n  });\n\n  getTransition = (attribute) => `${attribute} ${this.props.duration}ms ${this.props.easing}`;\n\n  getStyle() {\n    const transition = this.props.transitions.map(this.getTransition).join(',');\n\n    return {\n      ...this.getExpandStyle(),\n      transition,\n    };\n  }\n\n  updateStatus = (status) => this.setState({ status });\n\n  delay = (fn, time) => {\n    this.timeout = setTimeout(fn, time);\n  };\n\n  clearDelay = () => {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n  };\n\n  transit = (entering, entered, enter) => {\n    const { duration } = this.props;\n\n    this.updateStatus(entering);\n\n    this.delay(() => {\n      this.updateStatus(entered);\n\n      this.delay(() => {\n        this.updateStatus(enter);\n      }, duration);\n    }, initialTransitDuration);\n  };\n\n  toggle = (open) => {\n    this.clearDelay();\n\n    if (open) {\n      this.transit(PHASE.OPENING, PHASE.OPENED, PHASE.OPEN);\n    } else {\n      this.transit(PHASE.CLOSING, PHASE.CLOSED, PHASE.CLOSE);\n    }\n  };\n\n  setRef = (ref) => { this.refWrapper = ref; };\n\n  render() {\n    const { className, children, tag: Tag } = this.props;\n\n    const childProps = {\n      className,\n      style: this.getStyle(),\n      ref: this.setRef,\n    };\n\n    return (\n      <Tag {...childProps}>\n        {children}\n      </Tag>\n    );\n  }\n}\n\nExpand.propTypes = {\n  children: PropTypes.node.isRequired,\n  open: PropTypes.bool,\n  duration: PropTypes.number,\n  easing: PropTypes.string,\n  className: PropTypes.string,\n  tag: PropTypes.string,\n  transitions: PropTypes.arrayOf(PropTypes.string),\n  styles: PropTypes.shape({\n    [PHASE.OPEN]: PropTypes.object,\n    [PHASE.CLOSE]: PropTypes.object,\n  }),\n};\n\nExpand.defaultProps = {\n  open: false,\n  duration: 400,\n  easing: 'ease-in-out',\n  className: '',\n  tag: 'div',\n  transitions: ['height', 'opacity'],\n  styles: {},\n};\n\nexport default Expand;\n"]},"metadata":{},"sourceType":"script"}